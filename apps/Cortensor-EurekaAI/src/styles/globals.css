/* src/app/globals.css */
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --background: 240 10% 3.9%;
    --foreground: 0 0% 98%;
    --card: 240 10% 3.9%;
    --card-foreground: 0 0% 98%;
    --popover: 240 10% 3.9%;
    --popover-foreground: 0 0% 98%;
    --primary: 0 0% 98%;
    --primary-foreground: 240 5.9% 10%;
    --secondary: 240 3.7% 15.9%;
    --secondary-foreground: 0 0% 98%;
    --muted: 240 3.7% 15.9%;
    --muted-foreground: 240 5% 64.9%;
    --accent: 240 3.7% 15.9%;
    --accent-foreground: 0 0% 98%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 0 0% 98%;
    --border: 240 3.7% 15.9%;
    --input: 240 3.7% 15.9%;
    --ring: 0 0% 83.1%;
    --radius: 0.5rem;

    /* Variabel Warna Chat untuk Dark Mode */
    --user-bubble-background: 214 90% 52%;
    --user-bubble-foreground: 0 0% 98%;
    --assistant-bubble-background: 240 3.7% 15.9%;
    --assistant-bubble-foreground: 0 0% 98%;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
  }
}

/* Text Truncation Utilities */
.text-truncate-chat {
  display: -webkit-box;
  -webkit-line-clamp: 1;
  -webkit-box-orient: vertical;
  overflow: hidden;
  word-break: break-word;
  max-width: 100%;
}

/* Light Mode Improvements */
/* Light mode removed - Dark mode only */

/* Light mode specific background */
:root:not(.dark) body {
  background: linear-gradient(135deg, 
    rgba(186, 230, 253, 0.4) 0%,    /* Light blue */
    rgba(219, 234, 254, 0.3) 25%,   /* Very light blue */
    rgba(252, 231, 243, 0.3) 50%,   /* Light pink */
    rgba(254, 215, 170, 0.35) 75%,  /* Light orange */
    rgba(255, 237, 213, 0.4) 100%   /* Very light peach */
  );
  background-attachment: fixed;
  min-height: 100vh;
}

/* Ensure components work well with gradient background */
:root:not(.dark) .bg-background {
  background: rgba(248, 250, 252, 0.8) !important;
  backdrop-filter: blur(10px);
}

:root:not(.dark) .bg-card {
  background: rgba(255, 255, 255, 0.9) !important;
  backdrop-filter: blur(10px);
  border: 1px solid rgba(226, 232, 240, 0.6);
}

:root:not(.dark) .bg-muted {
  background: rgba(248, 250, 252, 0.7) !important;
  backdrop-filter: blur(8px);
}  /* Better chat bubbles in light mode */
/* Enhanced Chat Bubbles for Light Mode */
.chat-bubble-user {
  background: rgba(59, 130, 246, 0.1) !important;
  border: 1px solid rgba(59, 130, 246, 0.2) !important;
  backdrop-filter: blur(10px);
}

.chat-bubble-assistant {
  background: rgba(255, 255, 255, 0.85) !important;
  border: 1px solid rgba(226, 232, 240, 0.6) !important;
  backdrop-filter: blur(10px);
}  /* Better input styling in light mode */
  .input-light {
    background: hsl(220 10% 99%) !important;
    border-color: hsl(220 8% 85%) !important;
  }
  
  /* Improved button styling */
  .btn-light {
    background: hsl(220 90% 56%) !important;
    color: white !important;
  }
}

@keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
@keyframes sparkle { 0%, 100% { transform: scale(1); opacity: 1; } 50% { transform: scale(1.3); opacity: 0.8; } }

/* Enhanced loading animations */
@keyframes pulse-ring {
  0% { transform: scale(0.8); opacity: 1; }
  50% { transform: scale(1.2); opacity: 0.3; }
  100% { transform: scale(1.4); opacity: 0; }
}

@keyframes breathing {
  0%, 100% { transform: scale(1); opacity: 0.7; }
  50% { transform: scale(1.1); opacity: 0.4; }
}

@keyframes wave-dots {
  0%, 60%, 100% { transform: initial; }
  30% { transform: translateY(-10px); }
}

@keyframes slide-progress {
  0% { transform: translateX(-100%); }
  50% { transform: translateX(0%); }
  100% { transform: translateX(100%); }
}

@keyframes glow {
  0%, 100% { box-shadow: 0 0 5px currentColor; }
  50% { box-shadow: 0 0 20px currentColor, 0 0 30px currentColor; }
}

/* Enhanced skeleton loading animations */
@keyframes skeleton-loading {
  0% { background-position: -200px 0; }
  100% { background-position: calc(200px + 100%) 0; }
}

@keyframes fade-in-up {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.9);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

/* Mobile optimizations */
.mobile-height {
  height: 100vh;
  height: 100dvh; /* Dynamic viewport height for mobile */
  min-height: 100vh;
  min-height: 100dvh;
}

.ios-scroll-fix {
  -webkit-overflow-scrolling: touch;
  overscroll-behavior: contain;
}

.mobile-scroll-safe {
  /* Ensure content doesn't get hidden behind mobile UI */
  padding-bottom: env(safe-area-inset-bottom);
  scroll-padding-bottom: 150px; /* Account for mobile keyboard */
}

/* Mobile-specific optimizations */
@media (max-width: 768px) {
  /* Force chat input to stay at bottom */
  .mobile-chat-input {
    position: fixed !important;
    bottom: 0 !important;
    left: 0 !important;
    right: 0 !important;
    z-index: 50 !important;
    width: 100% !important;
  }
  
  /* Prevent horizontal overflow */
  html, body {
    overflow-x: hidden;
    max-width: 100vw;
  }
  
  * {
    max-width: 100vw;
    box-sizing: border-box;
  }
  
  /* Prevent zoom on input focus */
  input, textarea, select {
    font-size: 16px !important;
    transform-origin: center center;
  }
  
  /* Better touch targets */
  button {
    min-height: 44px;
    min-width: 44px;
  }
  
  /* Better text wrapping for mobile */
  .word-break {
    word-break: break-word;
    overflow-wrap: break-word;
    hyphens: auto;
  }
  
  /* Mobile chat bubbles */
  .chat-bubble {
    word-wrap: break-word;
    overflow-wrap: break-word;
    word-break: break-word;
    hyphens: auto;
    max-width: 85vw;
    width: 100%;
    box-sizing: border-box;
  }
  
  /* Force all content to respect container width */
  .chat-bubble * {
    max-width: 100%;
    overflow-wrap: break-word;
    word-break: break-word;
  }
  
  /* Mobile code blocks */
  .chat-bubble pre {
    max-width: 100%;
    overflow-x: auto;
    white-space: pre-wrap;
    word-break: break-all;
    padding: 0.5rem;
    margin: 0.5rem 0;
    font-size: 0.75rem;
  }
  
  .chat-bubble code {
    word-break: break-all;
    overflow-wrap: break-word;
    white-space: pre-wrap;
    font-size: 0.75rem;
  }
  
  /* Mobile prose styling */
  .prose-sm {
    font-size: 0.875rem;
    line-height: 1.5;
    max-width: 100%;
  }
  
  .prose-sm * {
    max-width: 100%;
    overflow-wrap: break-word;
    word-break: break-word;
  }
  
  .prose-sm p {
    margin-top: 0.5rem;
    margin-bottom: 0.5rem;
    max-width: 100%;
    overflow-wrap: break-word;
  }
  
  .prose-sm pre {
    font-size: 0.75rem;
    padding: 0.5rem;
    overflow-x: auto;
    white-space: pre-wrap;
    word-break: break-all;
    max-width: 100%;
    width: 100%;
    box-sizing: border-box;
  }
  
  .prose-sm code {
    font-size: 0.75rem;
    word-break: break-all;
    overflow-wrap: break-word;
    white-space: pre-wrap;
  }
  
  .prose-sm h1, .prose-sm h2, .prose-sm h3, .prose-sm h4, .prose-sm h5, .prose-sm h6 {
    word-break: break-word;
    overflow-wrap: break-word;
    max-width: 100%;
  }
  
  .prose-sm ul, .prose-sm ol {
    max-width: 100%;
    padding-left: 1rem;
  }
  
  .prose-sm li {
    word-break: break-word;
    overflow-wrap: break-word;
    max-width: 100%;
  }
  
  /* Thinking content mobile optimization */
  .thinking-content {
    word-wrap: break-word;
    overflow-wrap: break-word;
    word-break: break-word;
    hyphens: auto;
    white-space: pre-wrap;
    max-width: 100%;
  }
  
  /* Smooth scrolling */
  * {
    scroll-behavior: smooth;
  }
}

/* Ensure background covers full height */
html, body {
  height: 100%;
  overflow-x: hidden;
}

/* Mobile-specific body fixes */
@media (max-width: 768px) {
  body {
    /* Prevent bouncing on iOS but allow scrolling */
    position: relative;
    width: 100%;
    height: 100dvh;
    overflow: hidden;
  }
}

/* Desktop body */
@media (min-width: 769px) {
  body {
    position: fixed;
    width: 100%;
    height: 100%;
    overflow: hidden;
  }
}
}

#__next {
  height: 100%;
}

/* Chat bubble improvements */
.chat-bubble {
  word-wrap: break-word;
  overflow-wrap: break-word;
  hyphens: auto;
  max-width: 100%;
  box-sizing: border-box;
}

.chat-bubble .prose {
  word-wrap: break-word;
  overflow-wrap: break-word;
  max-width: 100%;
}

.chat-bubble .prose pre {
  max-width: 100%;
  overflow-x: auto;
  white-space: pre-wrap;
  word-wrap: break-word;
}

.chat-bubble .prose code {
  word-wrap: break-word;
  overflow-wrap: break-word;
}

/* Thinking process text improvements */
.thinking-content {
  word-wrap: break-word;
  overflow-wrap: break-word;
  white-space: pre-wrap;
  max-width: 100%;
  overflow: hidden;
}

/* Mobile keyboard fixes */
@media (max-width: 768px) {
  /* Fix viewport height for mobile */
  .mobile-height {
    height: 100vh;
    height: 100dvh; /* Dynamic viewport height */
  }
  
  /* iOS scroll fix */
  .ios-scroll-fix {
    -webkit-overflow-scrolling: touch;
    overflow-scrolling: touch;
  }
  
  /* Prevent zoom on input focus */
  input, textarea, select {
    font-size: 16px !important;
  }
  
  /* Fixed positioning for mobile keyboard */
  /* Mobile chat input - STABLE positioning */
  .mobile-chat-input {
    position: fixed !important;
    bottom: 0 !important;
    left: 0 !important;
    right: 0 !important;
    z-index: 50 !important;
    width: 100vw !important;
    max-width: 100vw !important;
    transform: none !important; /* Prevent any transforms */
    transition: none !important; /* Prevent transitions that cause jumping */
  }
  
  /* Ensure proper layering */
  .mobile-sheet {
    z-index: 100 !important;
  }
  
  /* Prevent body scroll when keyboard is open */
  body.keyboard-open {
    position: fixed;
    width: 100%;
  }
}

/* Keyboard animation support */
@supports (height: 100dvh) {
  .mobile-height {
    height: 100dvh;
  }
}
